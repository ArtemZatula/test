<div mat-dialog-title>
  <h6>
    {{ title }}
  </h6>
  <button mat-icon-button class="close-icon" mat-dialog-close>
    <mat-icon>close</mat-icon>
  </button>
</div>
@if (bookFormGroup) {
  <form [formGroup]="bookFormGroup" (ngSubmit)="onSubmit()">
    <mat-dialog-content>
      <div class="form-container">
        <mat-form-field class="cover-input">
          <mat-label>Book Cover</mat-label>
          <input matInput 
                 readonly
                 type="text"
                 #fakeFileInput
                 (click)="hiddenInput.click()">
          <input hidden
                 type="file"
                 accept="image/*"
                 #hiddenInput
                 (change)="getFileOnLoad($event)">
          <mat-icon matSuffix>folder_open</mat-icon>
        </mat-form-field>

        <mat-form-field class="title-input">
          <mat-label>Title</mat-label>
          <input matInput formControlName="title" placeholder="Enter book title" />
          @if (bookFormGroup.get('title')?.hasError('required')) {
            <mat-error> Title is required. </mat-error>
          }
        </mat-form-field>

        <div class="cover">
          <img [src]="imagePreview" alt="Book Cover" />
        </div>
      
        <mat-form-field class="author-input">
          <mat-label>Author</mat-label>
          <input matInput formControlName="author" placeholder="Enter author's name" />
           @if (bookFormGroup.get('author')?.hasError('required')) {
            <mat-error> Author is required. </mat-error>
          }
        </mat-form-field>
      
        <mat-form-field class="year-input">
          <mat-label>Year</mat-label>
          <input matInput type="number" formControlName="year" placeholder="Enter publication year" />
          @if (bookFormGroup.get('year')?.hasError('required')) {
            <mat-error> Year is required. </mat-error>
          }
        </mat-form-field>
      
        <mat-form-field class="description-input">
          <mat-label>Description</mat-label>
          <textarea matInput formControlName="description" placeholder="Enter book description"></textarea>
        </mat-form-field>
      </div>
    </mat-dialog-content>
      
    <mat-dialog-actions align="end">
      <button mat-flat-button
              mat-dialog-close
              color="primary"
              type="submit"
              [disabled]="bookFormGroup.invalid || bookFormGroup.pristine">
        Save
      </button>
    </mat-dialog-actions>
  </form>
}


